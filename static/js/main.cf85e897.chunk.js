(window.webpackJsonpgmaps=window.webpackJsonpgmaps||[]).push([[0],{178:function(e,t,n){e.exports=n(385)},183:function(e,t,n){},385:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(34),i=n.n(r),c=(n(183),n(423)),l=n(422),s=n(428),u=n(417),p=n(421),d=n(29),m=n(7),h=n(18),g=n(9),f=n(19),b=n(20),y=n(22),v=n(21),O=n(82),E=n.n(O),w=n(109),j=function(e){var t=!1;return{cancel:function(){t=!0},setState:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};console.log(t),t||e.setState(n,a)}}},k=["atm","bank","pharmacy","hospital","airport","local_government_office","train_station","bus_station"],C=n(416),L=n(427),S=n(415),P=n(414),M=n(387),x=n(413),_=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return this.props.visible&&o.a.createElement(x.a,{color:"primary"})}}]),t}(a.Component);_.defaultProps={visible:!0};var T=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).refresh=function(){window.location.reload()},n.renderComponent=function(){return!n.props.getLocation||n.props.isGeolocationAvailable&&n.props.isGeolocationEnabled?n.state.initialLocationSet?null:o.a.createElement(c.a,{position:"absolute",top:0,left:0,height:"100vh",width:"100vw",bgcolor:"rgba(255,255,255, 0.7)",display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(_,null)):o.a.createElement(c.a,{position:"absolute",top:0,left:0,height:"100vh",width:"100vw",bgcolor:"rgba(255,255,255, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",p:4},o.a.createElement(L.a,null,o.a.createElement(P.a,null,o.a.createElement(M.a,{variant:"h4",component:"h2",color:"error"},"Unable to fecth the location"),o.a.createElement(M.a,{variant:"h5"},o.a.createElement("br",null),"Possible problem would be:"),o.a.createElement(M.a,{color:"textSecondary"},o.a.createElement("br",null),"1. Please enable the location service on your browser. To enable it please refresh the page and allow the location service."),o.a.createElement(M.a,{color:"textSecondary"},o.a.createElement("br",null),"2. If you are running in development mode please run on chrome browser.")),o.a.createElement(S.a,null,o.a.createElement(C.a,{onClick:n.refresh,size:"small"},"Refresh"))))},n.state={initialLocationSet:!1},n.setter=j(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this;this.props.getLocation&&this.props.isGeolocationAvailable&&this.props.isGeolocationEnabled&&!this.state.initialLocationSet&&(console.log("!this.state.initialLocationSet",!this.state.initialLocationSet),this.props.coords?this.setter.setState({initialLocationSet:!0},(function(){console.log("calling if setCurrentLocation",e.props.coords),e.props.setCurrentLocation(e.props.coords)})):this.setter.setState({initialLocationSet:!0},(function(){console.log("calling else setCurrentLocation"),e.props.setCurrentLocation({latitude:18.9908177,longitude:72.8382547})})))}},{key:"componentWillUnmount",value:function(){this.setter.cancel()}},{key:"render",value:function(){return this.renderComponent()}}]),t}(a.Component);T.defaultProps={getLocation:!0};var D=Object(w.geolocated)()(T),I=n(425),R=n(429),U=n(418),A=n(420),B=n(430),G=n(419),W={base:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyA_DT8VwhcsOtXOOd_fvQ-KUqidTqVmcOc","&v=3.exp&libraries=geometry,drawing,places"),direction:"https://www.google.com/maps/dir/?api=1"},q=n(37),z=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).toggleInfo=function(){n.setter.setState({infoShown:!n.state.infoShown})},n.getDirection=function(){var e=n.props.marker,t=encodeURIComponent(e.name+", "+e.vicinity);window.open("".concat(W.direction,"&destination_place_id=").concat(e.place_id,"&destination=").concat(t))},n.state={infoShown:!1},n.setter=j(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentWillUnmount",value:function(){this.setter.cancel()}},{key:"render",value:function(){var e=this.props.marker;return o.a.createElement(q.Marker,{position:{lat:e.latitude,lng:e.longitude},onClick:this.toggleInfo},this.state.infoShown&&o.a.createElement(q.InfoWindow,{onCloseClick:this.toggleInfo,visible:this.state.infoShown},o.a.createElement("div",{style:{padding:16}},o.a.createElement("div",null,o.a.createElement(M.a,{variant:"subtitle1"},"".concat(e.name,", ").concat(e.vicinity))),o.a.createElement("div",{style:{textAlign:"right"}},o.a.createElement(C.a,{color:"secondary",onClick:this.getDirection},"Get Directions")))))}}]),t}(a.Component),F=n(171),J=n.n(F),K=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).onPlaceSelected=function(e){if(e.geometry){var t={latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()};n.props.setCurrentLocation(t)}},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return o.a.createElement(J.a,{style:{width:"100%",height:"40px",paddingLeft:"16px",marginTop:"10px",marginBottom:"100px"},onPlaceSelected:this.onPlaceSelected,types:["(regions)"]})}}]),t}(a.Component),V=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return o.a.createElement(q.GoogleMap,{ref:this.props.onMapMounted,defaultZoom:12,center:{lat:this.props.latitude,lng:this.props.longitude}},this.props.isMarkerShown&&o.a.createElement(q.Marker,{position:{lat:this.props.latitude,lng:this.props.longitude}}),this.props.places.map((function(e){return o.a.createElement(z,{key:e.id,marker:e})})),o.a.createElement(K,{setCurrentLocation:this.props.setCurrentLocation}))}}]),t}(a.Component);V.defaultProps={isMarkerShown:!0};var H=Object(q.withScriptjs)(Object(q.withGoogleMap)(V)),N=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).getCheckBox=function(e,t){var a=n.props.selectedTypes.includes(e);return o.a.createElement(U.a,{control:o.a.createElement(I.a,{checked:a,onChange:n.props.filterChange(e),value:e,color:"primary"}),label:e,key:t})},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return console.log("map wrapper render"),o.a.createElement(G.a,{key:1,container:!0,style:{overflow:"auto"}},o.a.createElement(G.a,{item:!0,xs:12,sm:8,md:8,lg:8,style:{marginBottom:40}},o.a.createElement(H,{latitude:this.props.currentLocation.latitude,longitude:this.props.currentLocation.longitude,googleMapURL:W.base,loadingElement:o.a.createElement(_,null),containerElement:o.a.createElement("div",{style:{height:"400px"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}}),setCurrentLocation:this.props.setCurrentLocation,onMapMounted:this.props.onMapMounted,places:this.props.places})),o.a.createElement(G.a,{item:!0,xs:12,sm:4,md:4,lg:4},o.a.createElement(c.a,{color:"text.primary",p:4},o.a.createElement(R.a,{component:"fieldset"},o.a.createElement(B.a,{component:"legend"},"Filter Places"),o.a.createElement(A.a,null,this.props.types.map((function(t,n){return e.getCheckBox(t,n)})))))))}}]),t}(a.Component);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var X=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).setCurrentLocation=function(e){var t=e.latitude,a=e.longitude;console.log("setCurrentLocation called");var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state.currentLocation,{latitude:t,longitude:a});n.fetchPlaces(t,a,n.state.selectedTypes).then((function(e){console.log(e),n.setter.setState({currentLocation:o,places:e,loading:!1})}))},n.onMapMounted=function(e){n.mapRef=e},n.filterChange=function(e){return function(t){console.log(e,t.target.checked);var a=t.target.checked,o=Object(d.a)(n.state.selectedTypes);if(a)o.push(e);else{var r=E.a.findIndex(o,(function(t){return t===e}));r>=0&&o.splice(r,1)}n.fetchPlaces(n.state.currentLocation.latitude,n.state.currentLocation.longitude,o).then((function(e){n.setter.setState({places:e,selectedTypes:o})}))}},n.fetchPlaces=function(e,t,a){return new Promise((function(o,r){if(n.mapRef){var i=[],c=window.google,l=new c.maps.places.PlacesService(n.mapRef.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED),s={type:a||n.state.selectedTypes,location:{lat:e||n.state.currentLocation.latitude,lng:t||n.state.currentLocation.longitude},radius:5e3};l.nearbySearch(s,(function(e,t){console.log(e),t!==c.maps.places.PlacesServiceStatus.OK||E.a.isEmpty(a)||E.a.map(e,(function(e){var t={latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng(),icon:e.icon,name:e.name,id:e.place_id,vicinity:e.vicinity};i.push(t)})),o(i)}))}else o([])}))},n.getComponent=function(){return n.state.loading?o.a.createElement(D,{key:0,getLocation:n.state.loading,setCurrentLocation:n.setCurrentLocation}):o.a.createElement(N,{key:1,loading:n.state.loading,currentLocation:n.state.currentLocation,setCurrentLocation:n.setCurrentLocation,onMapMounted:n.onMapMounted,fetchPlaces:n.fetchPlaces,places:n.state.places,types:n.state.types,selectedTypes:n.state.selectedTypes,filterChange:n.filterChange})},n.state={loading:!0,currentLocation:{},places:[],types:k,selectedTypes:[]},n.mapRef=null,n.google=null,n.setter=j(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.google=window.google}},{key:"componentWillUnmount",value:function(){this.setter.cancel()}},{key:"render",value:function(){return this.getComponent()}}]),t}(a.Component),Y=n(172),Z=n(426),$=Object(Y.a)({palette:{type:"dark"}});$=Object(Z.a)($);n(384);var ee=function(){return o.a.createElement(u.a,{defer:!0},o.a.createElement(s.a,null),o.a.createElement(p.a,{theme:$},o.a.createElement(c.a,{width:"100vw",bgcolor:"background.paper"},o.a.createElement(l.a,{fluid:"true",style:{minHeight:"100%",padding:0}},o.a.createElement(c.a,{height:"100vh",width:"100%",display:"flex",boxShadow:3,borderRadius:"borderRadius",bgcolor:"background.default",p:2,overflow:"visible"},o.a.createElement(X,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[178,1,2]]]);
//# sourceMappingURL=main.cf85e897.chunk.js.map