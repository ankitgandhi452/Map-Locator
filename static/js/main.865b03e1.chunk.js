(window.webpackJsonpgmaps=window.webpackJsonpgmaps||[]).push([[0],{177:function(e,t,n){e.exports=n(385)},182:function(e,t,n){},384:function(e,t,n){},385:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(34),i=n.n(r),c=(n(182),n(418)),l=n(417),s=n(422),u=n(412),p=n(416),d=n(29),h=n(7),g=n(18),m=n(9),f=n(19),b=n(20),y=n(22),v=n(21),O=n(81),j=n.n(O),E=n(109),w=function(e){var t=!1;return{cancel:function(){t=!0},setState:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};console.log(t),t||e.setState(n,o)}}},C=["atm","bank","pharmacy","hospital","airport","local_government_office","train_station","bus_station"],L=n(387),k=n(410),S=function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.props.visible&&a.a.createElement(k.a,{color:"primary"})}}]),t}(o.Component);S.defaultProps={visible:!0};var P=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).renderComponent=function(){return!n.props.getLocation||n.props.isGeolocationAvailable&&n.props.isGeolocationEnabled?n.state.initialLocationSet?null:a.a.createElement(c.a,{position:"absolute",top:0,left:0,height:"100vh",width:"100vw",bgcolor:"rgba(255,255,255, 0.7)",display:"flex",justifyContent:"center",alignItems:"center"},a.a.createElement(S,null)):a.a.createElement(c.a,{position:"absolute",top:0,left:0,height:"100vh",width:"100vw",bgcolor:"rgba(255,255,255, 0.7)",display:"flex",justifyContent:"center",alignItems:"center"},a.a.createElement(L.a,{variant:"h6"},"Please try on chrome if you are running on a local host. Unable to get the geoloaction"))},n.state={initialLocationSet:!1},n.setter=w(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this;this.props.getLocation&&this.props.isGeolocationAvailable&&this.props.isGeolocationEnabled&&!this.state.initialLocationSet&&(console.log("!this.state.initialLocationSet",!this.state.initialLocationSet),this.props.coords?this.setter.setState({initialLocationSet:!0},(function(){console.log("calling if setCurrentLocation",e.props.coords),e.props.setCurrentLocation(e.props.coords)})):this.setter.setState({initialLocationSet:!0},(function(){console.log("calling else setCurrentLocation"),e.props.setCurrentLocation({latitude:18.9908177,longitude:72.8382547})})))}},{key:"componentWillUnmount",value:function(){this.setter.cancel()}},{key:"render",value:function(){return this.renderComponent()}}]),t}(o.Component);P.defaultProps={getLocation:!0};var _=Object(E.geolocated)()(P),M=n(420),x=n(423),D=n(413),R=n(415),T=n(424),I=n(414),U={base:"https://maps.googleapis.com/maps/api/js?key=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/TD-React-Challenge-Test-1"}).REACT_APP_GOOGLE_API,"&v=3.exp&libraries=geometry,drawing,places"),direction:"https://www.google.com/maps/dir/?api=1"},A=n(35),G=n(411),B=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).toggleInfo=function(){n.setter.setState({infoShown:!n.state.infoShown})},n.getDirection=function(){var e=n.props.marker,t=encodeURIComponent(e.name+", "+e.vicinity);window.open("".concat(U.direction,"&destination_place_id=").concat(e.place_id,"&destination=").concat(t))},n.state={infoShown:!1},n.setter=w(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){this.setter.cancel()}},{key:"render",value:function(){var e=this.props.marker;return a.a.createElement(A.Marker,{position:{lat:e.latitude,lng:e.longitude},onClick:this.toggleInfo},this.state.infoShown&&a.a.createElement(A.InfoWindow,{onCloseClick:this.toggleInfo,visible:this.state.infoShown},a.a.createElement("div",{style:{padding:16}},a.a.createElement("div",null,a.a.createElement(L.a,{variant:"subtitle1"},"".concat(e.name,", ").concat(e.vicinity))),a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(G.a,{color:"secondary",onClick:this.getDirection},"Get Directions")))))}}]),t}(o.Component),W=n(170),N=n.n(W),F=function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).onPlaceSelected=function(e){if(e.geometry){var t={latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()};n.props.setCurrentLocation(t)}},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return a.a.createElement(N.a,{style:{width:"100%",height:"40px",paddingLeft:"16px",marginTop:"10px",marginBottom:"100px"},onPlaceSelected:this.onPlaceSelected,types:["(regions)"]})}}]),t}(o.Component),J=function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return a.a.createElement(A.GoogleMap,{ref:this.props.onMapMounted,defaultZoom:12,center:{lat:this.props.latitude,lng:this.props.longitude}},this.props.isMarkerShown&&a.a.createElement(A.Marker,{position:{lat:this.props.latitude,lng:this.props.longitude}}),this.props.places.map((function(e){return a.a.createElement(B,{key:e.id,marker:e})})),a.a.createElement(F,{setCurrentLocation:this.props.setCurrentLocation}))}}]),t}(o.Component);J.defaultProps={isMarkerShown:!0};var H=Object(A.withScriptjs)(Object(A.withGoogleMap)(J)),K=function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).getCheckBox=function(e,t){var o=n.props.selectedTypes.includes(e);return a.a.createElement(D.a,{control:a.a.createElement(M.a,{checked:o,onChange:n.props.filterChange(e),value:e,color:"primary"}),label:e,key:t})},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return console.log("map wrapper render"),a.a.createElement(I.a,{key:1,container:!0,style:{overflow:"auto"}},a.a.createElement(I.a,{item:!0,xs:12,sm:8,md:8,lg:8,style:{marginBottom:40}},a.a.createElement(H,{latitude:this.props.currentLocation.latitude,longitude:this.props.currentLocation.longitude,googleMapURL:U.base,loadingElement:a.a.createElement(S,null),containerElement:a.a.createElement("div",{style:{height:"400px"}}),mapElement:a.a.createElement("div",{style:{height:"100%"}}),setCurrentLocation:this.props.setCurrentLocation,onMapMounted:this.props.onMapMounted,places:this.props.places})),a.a.createElement(I.a,{item:!0,xs:12,sm:4,md:4,lg:4},a.a.createElement(c.a,{color:"text.primary",p:4},a.a.createElement(x.a,{component:"fieldset"},a.a.createElement(T.a,{component:"legend"},"Filter Places"),a.a.createElement(R.a,null,this.props.types.map((function(t,n){return e.getCheckBox(t,n)})))))))}}]),t}(o.Component);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Y=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).setCurrentLocation=function(e){var t=e.latitude,o=e.longitude;console.log("setCurrentLocation called");var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state.currentLocation,{latitude:t,longitude:o});n.fetchPlaces(t,o,n.state.selectedTypes).then((function(e){console.log(e),n.setter.setState({currentLocation:a,places:e,loading:!1})}))},n.onMapMounted=function(e){n.mapRef=e},n.filterChange=function(e){return function(t){console.log(e,t.target.checked);var o=t.target.checked,a=Object(d.a)(n.state.selectedTypes);if(o)a.push(e);else{var r=j.a.findIndex(a,(function(t){return t===e}));r>=0&&a.splice(r,1)}n.fetchPlaces(n.state.currentLocation.latitude,n.state.currentLocation.longitude,a).then((function(e){n.setter.setState({places:e,selectedTypes:a})}))}},n.fetchPlaces=function(e,t,o){return new Promise((function(a,r){if(n.mapRef){var i=[],c=window.google,l=new c.maps.places.PlacesService(n.mapRef.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED),s={type:o||n.state.selectedTypes,location:{lat:e||n.state.currentLocation.latitude,lng:t||n.state.currentLocation.longitude},radius:5e3};l.nearbySearch(s,(function(e,t){console.log(e),t!==c.maps.places.PlacesServiceStatus.OK||j.a.isEmpty(o)||j.a.map(e,(function(e){var t={latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng(),icon:e.icon,name:e.name,id:e.place_id,vicinity:e.vicinity};i.push(t)})),a(i)}))}else a([])}))},n.getComponent=function(){return n.state.loading?a.a.createElement(_,{key:0,getLocation:n.state.loading,setCurrentLocation:n.setCurrentLocation}):a.a.createElement(K,{key:1,loading:n.state.loading,currentLocation:n.state.currentLocation,setCurrentLocation:n.setCurrentLocation,onMapMounted:n.onMapMounted,fetchPlaces:n.fetchPlaces,places:n.state.places,types:n.state.types,selectedTypes:n.state.selectedTypes,filterChange:n.filterChange})},n.state={loading:!0,currentLocation:{},places:[],types:C,selectedTypes:[]},n.mapRef=null,n.google=null,n.setter=w(Object(y.a)(n)),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.google=window.google}},{key:"componentWillUnmount",value:function(){this.setter.cancel()}},{key:"render",value:function(){return this.getComponent()}}]),t}(o.Component),Z=n(171),$=n(421),q=Object(Z.a)({palette:{type:"dark"}});q=Object($.a)(q);n(383),n(384);var z=function(){return a.a.createElement(u.a,{defer:!0},a.a.createElement(s.a,null),a.a.createElement(p.a,{theme:q},a.a.createElement(c.a,{width:"100vw",bgcolor:"background.paper"},a.a.createElement(l.a,{fluid:"true",style:{minHeight:"100%",padding:0}},a.a.createElement(c.a,{height:"100vh",width:"100%",display:"flex",boxShadow:3,borderRadius:"borderRadius",bgcolor:"background.default",p:2,overflow:"visible"},a.a.createElement(Y,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[177,1,2]]]);
//# sourceMappingURL=main.865b03e1.chunk.js.map